$settings-active-color: #f8f8f8;

chat {
  display: flex;
  flex-direction: row-reverse;
  height: 100vh;
  margin-right: $sidebar-width - 1;
  overflow: hidden;

  dialog-container {
    display: flex;
    flex-grow: 1;
    flex-direction: column;
    overflow: auto;
  }

  connection-editor { max-width: 500px; min-width: 500px; }

  convos-help,
  new-dialog { max-width: 420px; min-width: 420px; }

  dialog-container { max-width: $readable-width + 40; } // 40 is just a wild guess
  dialog-container main {
    overflow: auto;
    flex-grow: 1;
  }

  nav {
    width: $sidebar-width;
    display: flex;
    flex-direction: column;
    position: fixed;
    top: 0;
    right: 0;
    bottom: 0;
    z-index: 900;

    sidebar-dialogs { flex-grow: 1; }
  }
}

connection-editor,
convos-help,
dialog-container,
new-dialog {
  overflow: auto;
  max-height: 100vh;

  h5 {
    margin-top: 0;
    padding-top: $gutter-width / 2;
  }

  .actions {
    overflow: hidden;
    position: absolute;
    top: $gutter-width * 0.4;
    right: $gutter-width * 0.3;
  }
}

connection-editor,
convos-help,
new-dialog {
  background: $settings-active-color;
  position: relative;
}

convos-help {
  dl dd {
    margin: 0 0 $gutter-width * 0.3 $gutter-width;
  }
  ul {
    list-style-type: square;
    padding-left: $gutter-width;
    li { list-style-type: inherit; }
  }
}

dialog-container {
  border-right: 1px solid lighten($input-border-color, 32%);
  padding: 0 $gutter-width / 2 0 $gutter-width /2;

  header {
    border-bottom: 1px solid lighten($input-border-color, 32%);
    position: relative;
    .actions { right: -4px; }
  }

  main ol.collection {
    border: 0;
    padding: 0;
    list-style-type: none;

    h5.title { font-size: 1.1rem; padding: 0; color: #000; }

    .collection-item {
      position: relative;
      padding: 10px 0;
    }
    .collection-item.special {
      background: #f8faf8;
    }
    .secondary-content {
      position: absolute;
      top: 10px;
      right: 0px;
      &, a {
        color: color('grey', 'darken-1');
        font-size: 0.8rem;
        overflow: hidden;
        display: block;
      }
      i {
        vertical-align: bottom;
      }
    }
    .collection-item.special .secondary-content {
      top: 2px;
    }
    .message {
      a { color: inherit; text-decoration: underline; }
      a:hover { text-decoration: none; }
    }
  }
}

nav {
  border-left: 1px solid lighten($input-border-color, 32%);
  color: #777;

  sidebar-dialogs,
  sidebar-notifications,
  sidebar-search {
    border-bottom: 4px solid lighten($input-border-color, 28%);
  }

  sidebar-dialogs {
    .on {
      display: block;
      font-size: 0.9rem;
      color: #777;
      margin-left: 28px;
      margin-bottom: -5px;
    }
  }

  sidebar-search {
    .input-field label { left: 0; }
    #search_input { margin: 0; }
  }

  sidebar-settings {
    .collection { margin-bottom: 0; }
  }

  .collection { margin: 0; border: 0; }
  .collection .collection-item.active {
    background-color: $settings-active-color;
    color: #1B5E20;
  }

  .material-icons { vertical-align: bottom; }
}

user-input {
  .actions {
    text-align: right;
    overflow: visible;
    position: relative;
    height: 0;
    top: -34px;
    right: 1px;
    a {
      display: inline-block;
      margin-right: -4px;
      padding: 4px 6px;
    }
    i { vertical-align: bottom; }
  }

  textarea.materialize-textarea {
    height: 4rem;
    min-height: 4rem;
    max-height: 11.5rem;
    margin: 0;
    padding: 1rem;
    overflow: auto;
    width: 100%;
    border: 1px solid lighten($input-border-color, 25%);
    box-sizing: border-box;

    &:focus {
      border: 1px solid lighten($input-border-color, 5%);
    }
  }
}

.collection-item.split {
  display: flex;
  padding: 0;
  > a {
    padding: 10px 20px;
    flex-grow: 0.5;
    display: block;
    transition: .25s;
    color: $collection-link-color;
    border-right: 1px solid $collection-border-color;
    &:last { border-right: 0; }
    &:not(.active) {
      &:hover {
        background-color: $collection-hover-bg-color;
      }
    }
  }
}
