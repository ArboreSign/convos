(function(){Vue.component("convos-dialog-settings",{props:["user"],data:function(){return{mOpts:{escape:true,links:true},modes:{'@':'+o','+':'+v'}};},computed:{dialog:function(){return this.user.getActiveDialog();},participants:function(){if(!this.dialog)return[];return Object.keys(this.dialog.participants)
.sort(function(a,b){return a.toLowerCase().localeCompare(b.toLowerCase());})
.map(function(k){return this.dialog.participants[k]||{name:k};}.bind(this));}},methods:{closeTooltip:function(){return this.dialog.is_private?'Close conversation':'Part channel';},shareUrl:function(){var dialog=this.dialog;return['','api','connection',dialog.connection_id,'dialog',dialog.dialog_id,'share']
.map(function(p){return encodeURIComponent(p)})
.join('/');}},template:"<div class=\"convos-dialog-settings is-sidebar\">\n    <header><convos-header-links :user=\"user\"></convos-header-links></header>\n    <div class=\"content\" v-if=\"!dialog\">\n      <div class=\"row\">\n        <div class=\"col s12\">\n          <h5>About Convos</h5>\n          <convos-resources></convos-resources>\n        </div>\n      </div>\n    </div>\n    <div class=\"content\" v-if=\"dialog\">\n      <div class=\"row\">\n        <div class=\"col s12\">\n          <h5>About {{dialog.name}}</h5>\n          <p v-if=\"!dialog.is_private\">{{{dialog ? dialog.topic || &#39;No topic is set.&#39; : &#39;No active dialog.&#39; | markdown mOpts}}}</p>\n          <p v-if=\"dialog.is_private\">You&#39;re in a private conversation.</p>\n        </div>\n      </div>\n      <div class=\"row\">\n        <div class=\"col s12 li-link\">\n          <a @click.prevent=\"send(&#39;/close&#39;)\" href=\"#close\" v-if=\"dialog\">\n            <i class=\"material-icons\">close</i>\n            {{closeTooltip()}}\n          </a>\n        </div>\n      </div>\n      <div class=\"row\" v-if=\"settings.share_dialog\">\n        <div class=\"col s12 li-link\">\n          <a :href=\"shareUrl()\" target=\"_blank\">\n            <i class=\"material-icons\">share</i>\n            Share conversation\n          </a>\n        </div>\n      </div>\n      <div class=\"row\">\n        <div class=\"col s12\">\n          <h5>Participants ({{participants.length}})</h5>\n        </div>\n      </div>\n      <div class=\"row participant\" v-for=\"p in participants\">\n        <div class=\"col s12\">\n          <span class=\"secondary-content ts\">\n            {{modes[p.mode] || p.mode}}\n            <a @click.prevent=\"send(&#39;/whois &#39; + p.name)\" class=\"waves-effect waves-light\" href=\"#info\"><i class=\"material-icons\">info</i></a>\n          </span>\n          <a @click.prevent=\"send(&#39;/query &#39; + p.name)\" href=\"#chat:{{p.name}}\">{{p.name}}</a>\n        </div>\n      </div>\n    </div>\n  </div>\n"})})();