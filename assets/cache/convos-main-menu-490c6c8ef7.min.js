(function(){Vue.component("convos-main-menu",{props:["user"],data:function(){return{first:null,q:""};},computed:{dialogs:function(){return this.user.dialogs.sort(function(a,b){var ah=a.name.toLowerCase();var bh=b.name.toLowerCase();return ah<bh?-1:ah>bh?1:0;});}},methods:{connectionClass:function(c){var cn=this.activeClass('#connection/'+c.id);cn.frozen=c.state=='connected'?false:true;return cn;},dialogClass:function(d,i){if(!i)this.$nextTick(this.overrideHints);var cn=this.activeClass(d.href());cn.frozen=d.frozen?true:false;return cn;},search:function(e){if(e.shiftKey)return this.user.getActiveDialog().emit("focusInput");if(this.first&&this.q)this.settings.main=d.href();this.q="";}},template:"<div :class=\"settings.dialogsVisible ? &#39;&#39; : &#39;hidden&#39;\" class=\"convos-main-menu show-on-large\">\n    <header>\n      <convos-toggle-main-menu :user=\"user\"></convos-toggle-main-menu>\n      <div class=\"input-field\">\n        <input @keydown.enter=\"search\" autocomplete=\"off\" id=\"search_field\" placeholder=\"Search...\" type=\"search\" v-model=\"q\">\n        <label for=\"search_field\"><i class=\"material-icons\">search</i></label>\n      </div>\n    </header>\n    <div class=\"content\">\n      <a :class=\"dialogClass(d, $index)\" v-for=\"d in dialogs\" v-link=\"d.href()\" v-tooltip=\"d.frozen\">\n        <i class=\"material-icons\">{{d.icon()}}</i> <span class=\"name\">{{d.name}}</span>\n        <b class=\"n-uread\" v-if=\"d.unread\">{{d.unread &lt; 100 ? d.unread : &quot;99+&quot;}}</b>\n        <span class=\"on\" v-if=\"d.connection()\">{{d.connection().protocol}}-{{d.connection().name}}</span>\n        <span class=\"on\" v-else>convos-local</span>\n      </a>\n      <a :class=\"activeClass(&#39;#create-dialog&#39;)\" class=\"simple\" v-if=\"user.connections.length\" v-link.literal=\"#create-dialog\">\n        <i class=\"material-icons\">add</i> Join dialog...\n      </a>\n\n      <div class=\"divider\"></div>\n      <a :class=\"connectionClass(c)\" v-for=\"c in user.connections\" v-link=\"&#39;#connection/&#39; + c.id\">\n        <i class=\"material-icons\">device_hub</i> {{c.protocol}}-{{c.name}}\n        <span class=\"on\">{{c.humanState()}}</span>\n      </a>\n      <a :class=\"activeClass(&#39;#connection&#39;)\" class=\"simple\" v-link.literal=\"#connection\">\n        <i class=\"material-icons\">add</i> Add connection...\n      </a>\n\n      <div class=\"divider\"></div>\n      <a class=\"hide-on-large-only simple\" v-sidebar.literal=\"#profile\">\n        <i class=\"material-icons\">account_circle</i> Edit profile\n      </a>\n      <a :class=\"activeClass\" class=\"hide-on-large-only simple\" v-sidebar.literal=\"#help\">\n        <i class=\"material-icons\">help</i> Help\n      </a>\n      <a class=\"simple\" v-link.literal=\"/api/user/logout\">\n        <i class=\"material-icons\">power_settings_new</i> Logout\n      </a>\n    </div>\n  </div>\n"})})();