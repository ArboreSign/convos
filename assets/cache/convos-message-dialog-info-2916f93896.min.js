(function(){Vue.component("convos-message-dialog-info",{props:["dialog","msg","user"],data:function(){var participants=Object.values(this.dialog.participants).filter(function(p){return p.online;}).sort(function(a,b){if(a.name.toLowerCase()<b.name.toLowerCase())return-1;if(a.name.toLowerCase()>b.name.toLowerCase())return 1;return 0;});return{nParticipants:String.prototype.numberAsString.call(participants.length+1),participants:participants};},methods:{whois:function(p){this.dialog.connection().send("/whois "+p.name);}},template:"<div class=\"convos-message notice\">\n    <a class=\"title\" href=\"#chat\">{{msg.from}}</a>\n    <div class=\"message\">\n      <template v-if=\"participants.length\">{{nParticipants | capitalize}} participants</template>\n      <template v-else>You are the only participant</template>\n      in {{dialog.name}}, connected to {{dialog.connection().name}}<template v-if=\"participants.length\">: You</template>\n      <template v-else>.</template><template v-for=\"p in participants\">{{$index + 1 == participants.length ? &quot;and&quot; : &quot;, &quot;}}\n        <a @click.prevent=\"whois(p)\" href=\"#whois:{{p.name}}\">{{p.mode}}{{p.name}}</a>\n      </template>.\n      <template v-if=\"dialog.topic\">\n        The topic is: {{dialog.topic}}\n      </template>\n      <template v-if=\"!dialog.topic\">\n        This dialog has no topic.\n      </template>\n    </div>\n    <span class=\"secondary-content ts\" v-tooltip=\"msg.ts.toLocaleString()\">{{msg.ts | timestring}}</span>\n  </div>\n"})})();