(function(){Vue.component("convos-register",{props:["currentPage","user"],data:function(){return{invite_code:"",email:localStorage.getItem("email"),errors:[],password:"",passwordAgain:"",};},methods:{register:function(){var self=this;this.errors=[];localStorage.setItem("email",this.email);if(this.password!=this.passwordAgain){$("#form_password").addClass("invalid");this.errors=[{message:"Passwords does not match"}];return;}
Convos.api.registerUser({body:{invite_code:this.invite_code,email:this.email,password:this.password}},function(err,xhr){if(err)return self.errors=err;self.$dispatch("login",xhr.body);}.bind(this));}},ready:function(){$("#form_email").focus();},template:"<div class=\"convos-register\">\n    <div class=\"row not-logged-in-wrapper\">\n      <form @submit.prevent=\"register\" class=\"col s12 m6 offset-m3\">\n        <div class=\"row\">\n          <div class=\"col s12\">\n            <h2>Convos</h2>\n            <p><i>- Collaboration done right.</i></p>\n          </div>\n        </div>\n        <div class=\"row\">\n          <div class=\"input-field col s12\">\n            <input class=\"validate\" id=\"form_email\" type=\"email\" v-model=\"email\">\n            <label for=\"form_email\">Email</label>\n          </div>\n        </div>\n        <div class=\"row\">\n          <div class=\"input-field col s6\">\n            <input class=\"validate\" id=\"form_password\" type=\"password\" v-model=\"password\">\n            <label for=\"form_password\">Password</label>\n          </div>\n          <div class=\"input-field col s6\">\n            <input class=\"validate\" id=\"form_password_again\" placeholder=\"Repeat password\" type=\"password\" v-model=\"passwordAgain\">\n          </div>\n        </div>\n        <div class=\"row\" v-if=\"settings.invite_code\">\n          <div class=\"input-field col s12\">\n            <input class=\"validate\" id=\"form_invite_code\" type=\"password\" v-model=\"invite_code\">\n            <label for=\"form_email\">Invite code</label>\n          </div>\n        </div>\n        <div class=\"row\" v-if=\"errors.length\">\n          <div class=\"col s12\"><div class=\"alert\">{{errors[0].message}}</div></div>\n        </div>\n        <div class=\"row\">\n          <div class=\"input-field col s12\">\n            <button class=\"btn waves-effect waves-light\" type=\"submit\">\n              Register <i class=\"material-icons right\">send</i>\n            </button>\n            <a @click.prevent=\"currentPage = &#39;convos-login&#39;\" class=\"btn-flat waves-effect waves-light\" href=\"#login\">Log in</a>\n          </div>\n        </div>\n        <div class=\"row\">\n          <div class=\"col s12 about\">\n            Â© <a href=\"http://nordaaker.com\">Nordaaker</a> - <a href=\"http://convos.by\">About</a>\n          </div>\n        </div>\n      </form>\n    </div>\n  </div>\n"})})();