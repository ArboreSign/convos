(function(){Vue.component("convos-profile",{props:["user"],data:function(){return{errors:[],password:"",passwordAgain:"",notifications:Notification.permission,sortDialogsByRead:false};},methods:{save:function(){var self=this;if(this.password!=this.passwordAgain)
return this.errors=[{message:"Passwords does not match"}];if(this.notifications&&this.notifications!=this.settings.notifications)
this.enableNotifications(true);if(!this.notifications)
this.enableNotifications(false);this.settings.sortDialogsBy=this.sortDialogsByRead?"lastRead":"";if(this.password){Convos.api.updateUser({body:{password:this.password}},function(err,res){if(err)self.errors=err;});}}},ready:function(){this.sortDialogsByRead=this.settings.sortDialogsBy=="lastRead";},template:"<div class=\"convos-profile is-sidebar\">\n    <header>\n      <convos-toggle-main-menu :user=\"user\"></convos-toggle-main-menu>\n      <convos-header-links :user=\"user\"></convos-header-links>\n    </header>\n    <div class=\"content\">\n      <div class=\"row\">\n        <div class=\"col s12\">\n          <h5 class=\"truncate\">{{user.email}}</h5>\n        </div>\n      </div>\n      <div class=\"row\">\n        <md-input :value.sync=\"password\" placeholder=\"At least six characters\" type=\"password\">Password</md-input>\n        <md-input :value.sync=\"passwordAgain\" type=\"password\">Repeat password</md-input>\n      </div>\n      <div class=\"row\">\n        <div class=\"col s12\">\n          <input :checked=\"settings.sortDialogsBy == &#39;lastRead&#39;\" class=\"filled-in\" id=\"form_sort_by\" type=\"checkbox\" v-model=\"sortDialogsByRead\">\n          <label for=\"form_sort_by\">Sort dialogs by &quot;last read&quot;</label>\n        </div>\n      </div>\n      <div class=\"row\">\n        <div class=\"col s12\">\n          <input :checked=\"settings.notifications == &#39;granted&#39;\" class=\"filled-in\" id=\"form_notifications\" type=\"checkbox\" v-model=\"notifications\">\n          <label for=\"form_notifications\">Enable notifications</label>\n        </div>\n      </div>\n      <div class=\"row\" v-if=\"errors.length\">\n        <div class=\"col s12\"><div class=\"alert\">{{errors[0].message}}</div></div>\n      </div>\n      <div class=\"row\">\n        <div class=\"col s12\">\n          <button @click=\"save\" class=\"btn waves-effect waves-light\" type=\"submit\">Update <i class=\"material-icons right\">save</i></button>\n        </div>\n      </div>\n    </div>\n  </div>\n"})})();